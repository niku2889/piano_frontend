<p-growl [(value)]="msgs"></p-growl>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle" width="425"></p-confirmDialog>
<!--Home Starts-->
<div class="row" matchheight="card">
	<div class="col-xl-12 col-lg-12">
		<div class="card" style="height: 553px;">
			<div class="card-header">
				<h4 class="card-title mb-0">Home</h4>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-md-2"></div>
					<div class="col-md-8">
						<div class="card-block text-center">
							<p-autoComplete [(ngModel)]="country" [suggestions]="filteredCountriesSingle" (completeMethod)="filterCountrySingle($event)"
							 [size]="30" (onSelect)="selectedmachin()" field="CODICE_RISORSA" [minLength]="1" [dropdown]="true">
								<ng-template let-country pTemplate="item">
									<div class="ui-helper-clearfix" style="border-bottom:1px solid #D5D5D5">
										<div style="font-size:12px;float:left;margin:10px 10px 0 0">{{country?.CODICE_RISORSA}}</div>
										<div style="font-size:12px;float:right;margin:10px 10px 0 0">{{country?.DESCRIZIONE}}</div>
									</div>
								</ng-template>
							</p-autoComplete>
						</div>
					</div>
					<div class="col-md-2"></div>
				</div>
				<!--Confirm Action Starts-->
				<section id="action">
					<div class="row">
						<div class="col-sm-12">
							<div class="card">
								<div class="card-header text-center">
									<h4 class="card-title">List of Orders</h4>
								</div>
								<div class="card-body">
									<div class="card-block">
										<!-- <p-table #dt [columns]="cols" [value]="cars" [paginator]="true" [rows]="10" sortField="priorita_ordine" [primeDragula]="bag"
										 [dragulaModel]="rows" [dragulaOptions]="{ childContainerSelector: 'tbody', initAfterView: true }"> -->
										<!-- <p-table #dt [columns]="cols" [value]="cars" [paginator]="true" [rows]="10" sortField="priorita_ordine" [reorderableColumns]="true">
											<ng-template pTemplate="caption">
												<div style="text-align: right">
													<i class="fa fa-search" style="margin:4px 4px 0 0"></i>
													<input type="text" pInputText size="50" placeholder="Global Filter" (input)="dt.filterGlobal($event.target.value, 'contains')"
													 style="width:auto">
												</div>
											</ng-template>
											<ng-template pTemplate="header" let-columns>
												<tr>
													<th style="width:2.5em"></th>
													<th *ngFor="let col of columns" [pSortableColumn]="col.field" pReorderableColumn>
														{{col.header}}
														<p-sortIcon [field]="col.field"></p-sortIcon>
													</th>
												</tr>
											</ng-template>
											<ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
												<tr [pSelectableRow]="rowData" [pReorderableRow]="index">
													<td>
														<i class="fa fa-bars" pReorderableRowHandle></i>
													</td>
												
													<td>
														{{rowData['codice_risorsa']}}
													</td>
													<td>
														{{rowData['codice_ordine']}}
													</td>
													<td>
														{{rowData['codice_parte']}}
													</td>
													<td>
														<input type="number" class="form-control" [(ngModel)]="rowData.priorita_ordine" />
													</td>
													<td>
														<button style="margin-bottom: 0px!important;" class="btn btn-default" (click)="updateOrder(rowData['codice_ordine'],rowData.priorita_ordine)">Save</button>
													</td>
												</tr>
											</ng-template>
										</p-table> -->

										<p-table [columns]="cols" [value]="cars" [sortMode]="none" (onRowReorder)="onRowReorder($event)" [reorderableColumns]="true"
										 [paginator]="true" [rows]="10" sortField="priorita_ordine">
											<ng-template pTemplate="caption">
												<div style="text-align: left">
													<button style="margin-bottom: 0px!important;" class="btn btn-default" (click)="updateOrder()">Save</button>
												</div>
											</ng-template>
											<ng-template pTemplate="header" let-columns>
												<tr>
													<th style="width:2.5em"></th>
													<th *ngFor="let col of columns" pReorderableColumn [pSortableColumn]="col.field">
														{{col.header}}
														<p-sortIcon [field]="col.field"></p-sortIcon>
													</th>
												</tr>
											</ng-template>
											<ng-template pTemplate="body" let-rowData let-columns="columns" let-index="rowIndex">
												<tr [pReorderableRow]="index" [style.color]="rowData.lastLine == 'true' ? 'red' : 'black'">
													<td>
														<i class="fa fa-bars" pReorderableRowHandle></i>
													</td>
													<td>
														{{rowData['codice_risorsa']}}
													</td>
													<td>
														{{rowData['codice_ordine']}}
													</td>
													<td>
														{{rowData['codice_parte']}}
													</td>
													<td>
														<span *ngIf="rowData.edit">
															<input type="number" class="form-control" [(ngModel)]="rowData.priorita_ordine" />
														</span>
														<span *ngIf="!rowData.edit">
															{{rowData.priorita_ordine}}
														</span>

													</td>
													<td>
														<button [style.color]="rowData.lastLine == 'true' ? 'red' : 'black'" style="margin-bottom: 0px!important;" class="btn btn-default" (click)="lastLine(index)">Last</button>
													</td>
												</tr>
											</ng-template>
										</p-table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
				<!--Confirm Action Ends-->
			</div>
		</div>
	</div>

</div>

<!--Home Ends-->